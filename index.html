<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VibePhone RD | Future Tech Store</title>
    
    <script src="https://www.paypal.com/sdk/js?client-id=AZkBcZLM9UNIZkNxdpwAllZuuyqH6W6pk7nJpLdIjBd0g4eZDAxOsqd4UdYIJYNK7VVxjOQy76x1fmhO&currency=USD"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Plus+Jakarta+Sans:wght@300;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        :root { --neon-blue: #00f2ff; --vibe-purple: #7000ff; --vibe-green: #00ff88; --dark-bg: #030712; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--dark-bg); color: white; margin: 0; overflow-x: hidden; }
        h1, h2, h3, .font-cyber { font-family: 'Orbitron', sans-serif; }
        .bg-glow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at 50% 50%, #1e1b4b 0%, #030712 100%); z-index: -2; }
        #gba-intro { position: fixed; inset: 0; background: #fff; z-index: 9999; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .letter { display: inline-block; transform: translateY(-500px); opacity: 0; font-size: 5rem; font-weight: 900; font-style: italic; }
        .drop { animation: fall 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        @keyframes fall { to { transform: translateY(0); opacity: 1; } }
        .glass-header { background: rgba(3, 7, 18, 0.8); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(0, 242, 255, 0.2); }
        .vibe-logo-master { width: 55px; height: 55px; background: #000; border: 2px solid var(--neon-blue); border-radius: 15px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px var(--neon-blue); cursor: pointer; transition: 0.3s; }
        .card-cyber { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 24px; padding: 20px; transition: 0.5s; overflow: hidden; }
        .card-cyber:hover { border-color: var(--neon-blue); background: rgba(0, 242, 255, 0.05); transform: translateY(-10px); }
        .footer-tech { background: linear-gradient(to top, #000, #030712); border-top: 2px solid var(--vibe-purple); padding: 80px 20px 40px; border-radius: 60px 60px 0 0; }
        .algo-box { font-family: monospace; font-size: 10px; color: var(--vibe-green); background: rgba(0,0,0,0.5); padding: 15px; border-radius: 15px; border: 1px solid rgba(0,255,136,0.2); }
        .vibe-input { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 12px 15px; width: 100%; color: white; outline: none; }
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); backdrop-filter: blur(15px); z-index: 9999; align-items: center; justify-content: center; }
    </style>
</head>
<body onclick="startApp()">
    <div class="bg-glow"></div>

    <div id="gba-intro">
        <div class="text-center">
            <div class="font-cyber">
                <span class="letter" style="color:#2b2b8c; animation-delay:0.1s">V</span>
                <span class="letter" style="color:#00a651; animation-delay:0.2s">I</span>
                <span class="letter" style="color:#fff200; animation-delay:0.3s">B</span>
                <span class="letter" style="color:#2b2b8c; animation-delay:0.4s">E</span>
            </div>
            <p class="mt-8 text-gray-400 font-bold animate-pulse tracking-[8px] text-[10px]">INICIANDO SISTEMA...</p>
        </div>
    </div>

    <nav class="fixed top-0 w-full z-50 glass-header px-6 py-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <div class="vibe-logo-master" id="admin-trigger" onmousedown="holdStart()" onmouseup="holdEnd()" ontouchstart="holdStart()" ontouchend="holdEnd()">
                <span class="font-cyber text-2xl font-black text-white">V</span>
            </div>
            <div>
                <h1 class="text-xl font-black text-white">VIBEPHONE <span class="text-cyan-400">RD</span></h1>
                <p class="text-[8px] font-bold text-gray-400 uppercase tracking-widest">Master Tech Store</p>
            </div>
        </div>
        <button onclick="openCart()" class="relative bg-cyan-500/10 p-3 rounded-2xl border border-cyan-500/30">
            <i class="fas fa-shopping-cart text-cyan-400"></i>
            <span id="cart-badge" class="absolute -top-1 -right-1 bg-cyan-500 text-[10px] w-5 h-5 rounded-full flex items-center justify-center font-black">0</span>
        </button>
    </nav>

    <section class="relative h-[45vh] flex items-center justify-center pt-20">
        <iframe id="hero-yt" class="absolute inset-0 w-full h-full object-cover opacity-30 pointer-events-none" frameborder="0"></iframe>
        <div class="relative z-10 text-center">
            <h2 class="text-5xl font-black italic tracking-tighter uppercase">Evolution.</h2>
            <p class="text-[9px] font-bold text-cyan-400 tracking-[0.4em]">"EL FUTURO EN TUS MANOS"</p>
        </div>
    </section>

    <main class="max-w-7xl mx-auto px-6 py-12">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8" id="store-grid"></div>
    </main>

    <footer class="footer-tech">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-12">
            <div>
                <h3 class="text-2xl font-black text-cyan-400 mb-6 uppercase">VibePhone RD</h3>
                <div class="flex gap-4">
                    <a href="#" class="text-2xl hover:text-cyan-400"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/18098182320" class="text-2xl hover:text-green-500"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="algo-box">
                <p class="animate-pulse">> ALGORITMO DE STOCK ACTIVADO...</p>
                <p>> LOCALIZACIÃ“N: SANTO DOMINGO, RD</p>
            </div>
            <div class="text-right text-[10px] font-black text-gray-600 tracking-[5px]">Â© 2026 VIBEPHONE RD</div>
        </div>
    </footer>

    <div id="modal-cart" class="modal-overlay">
        <div class="bg-gray-900 border border-cyan-500/30 p-8 rounded-[40px] w-full max-w-lg mx-4">
            <h2 class="font-cyber text-xl text-center text-cyan-400 mb-6 uppercase">Tu Carrito</h2>
            <div id="cart-items" class="space-y-3 mb-6 max-h-40 overflow-y-auto pr-2"></div>
            
            <div class="grid grid-cols-2 gap-4 mb-3">
                <input type="text" id="cust-name" placeholder="Nombre" class="vibe-input">
                <input type="text" id="cust-lastname" placeholder="Apellido" class="vibe-input">
            </div>
            <input type="email" id="cust-email" placeholder="Correo para Recibo" class="vibe-input mb-6">

            <div class="flex justify-between items-center mb-6 px-2">
                <span class="font-bold text-gray-400 uppercase text-xs">Total:</span>
                <span id="cart-total" class="font-cyber text-xl text-green-400">RD$ 0</span>
            </div>

            <div class="space-y-4">
                <div id="paypal-container"></div>
                <button onclick="checkoutWA()" class="w-full bg-[#25D366] hover:bg-green-500 py-4 rounded-2xl font-black text-xs uppercase flex items-center justify-center gap-2 transition-all">
                    <i class="fab fa-whatsapp text-lg"></i> Ordenar por WhatsApp
                </button>
            </div>
            
            <button onclick="closeCart()" class="w-full mt-6 text-gray-500 text-[10px] font-bold uppercase tracking-widest">Cerrar</button>
        </div>
    </div>

    <div id="modal-admin" class="modal-overlay">
        <div class="bg-white text-black p-8 rounded-[30px] w-full max-w-2xl">
            <h2 class="font-black mb-6 uppercase text-center border-b pb-4">Consola Maestra</h2>
            <div class="grid grid-cols-2 gap-6">
                <div class="space-y-3">
                    <input type="number" id="adm-tasa" placeholder="Tasa USD" class="w-full border p-3 rounded-xl font-bold">
                    <input type="text" id="adm-vid" placeholder="YouTube ID" class="w-full border p-3 rounded-xl font-bold">
                </div>
                <div class="space-y-3">
                    <input type="text" id="adm-n" placeholder="Equipo" class="w-full border p-3 rounded-xl font-bold">
                    <input type="number" id="adm-p" placeholder="Precio RD$" class="w-full border p-3 rounded-xl font-bold">
                    <input type="text" id="adm-u" placeholder="Imagen URL" class="w-full border p-3 rounded-xl font-bold">
                </div>
            </div>
            <button onclick="saveAdmin()" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-black uppercase mt-6">Sincronizar Inventario</button>
            <div id="admin-list" class="max-h-32 overflow-y-auto mt-6 text-[10px] font-bold border-t pt-4 space-y-2"></div>
            <button onclick="document.getElementById('modal-admin').style.display='none'" class="w-full mt-4 text-gray-400 text-[10px] font-bold uppercase">Salir</button>
        </div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyByV8-3X8kR_TlxV7-H6m5jW7L-p_z1r4", authDomain: "phonestorerd.firebaseapp.com", projectId: "phonestorerd", storageBucket: "phonestorerd.appspot.com", messagingSenderId: "360706963034", appId: "1:360706963034:web:49d1102e8ca73d55918a63" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        let cart = [], TASA = 58.5, pressTimer;

        function holdStart() { pressTimer = setTimeout(() => { document.getElementById('modal-admin').style.display='flex'; loadAdminList(); }, 3000); }
        function holdEnd() { clearTimeout(pressTimer); }
        window.onkeydown = (e) => { if(e.altKey && e.key.toLowerCase() === 'a') { document.getElementById('modal-admin').style.display='flex'; loadAdminList(); } };

        function startApp() {
            if(window.init) return; window.init = true;
            document.querySelectorAll('.letter').forEach(l => l.classList.add('drop'));
            setTimeout(() => document.getElementById('gba-intro').style.display='none', 3000);
        }

        async function loadStore() {
            const conf = await db.collection("config").doc("hero").get();
            if(conf.exists) { TASA = conf.data().tasa || 58.5; document.getElementById('hero-yt').src = `https://www.youtube.com/embed/${conf.data().videoId}?autoplay=1&mute=1&loop=1&playlist=${conf.data().videoId}&controls=0`; }
            const snap = await db.collection("productos").get();
            const grid = document.getElementById('store-grid'); grid.innerHTML = "";
            snap.forEach(doc => {
                const p = doc.data();
                grid.innerHTML += `<div class="card-cyber"><img src="${p.url}" class="h-40 w-full object-contain mb-4"><h3 class="font-bold text-xs uppercase mb-3">${p.n}</h3><div class="flex justify-between items-center"><span class="text-cyan-400 font-cyber font-black">RD$ ${p.p.toLocaleString()}</span><button onclick="addToCart('${p.n}', ${p.p})" class="bg-cyan-500 w-10 h-10 rounded-xl text-black flex items-center justify-center shadow-[0_0_10px_#00f2ff]"><i class="fas fa-plus"></i></button></div></div>`;
            });
        }

        async function saveAdmin() {
            const v = document.getElementById('adm-vid').value, t = document.getElementById('adm-tasa').value, n = document.getElementById('adm-n').value, p = document.getElementById('adm-p').value, u = document.getElementById('adm-u').value;
            if(v || t) await db.collection("config").doc("hero").set({ videoId: v, tasa: parseFloat(t) }, {merge:true});
            if(n && p && u) await db.collection("productos").add({ n, p: parseInt(p), url: u });
            location.reload();
        }

        async function loadAdminList() {
            const snap = await db.collection("productos").get();
            const list = document.getElementById('admin-list'); list.innerHTML = "";
            snap.forEach(doc => { list.innerHTML += `<div class="flex justify-between items-center bg-gray-100 p-2 rounded uppercase"><span>${doc.data().n}</span><button onclick="delProd('${doc.id}')" class="text-red-500 font-black">Eliminar</button></div>`; });
        }

        async function delProd(id) { if(confirm("Â¿Borrar?")) { await db.collection("productos").doc(id).delete(); loadAdminList(); loadStore(); } }

        function addToCart(n, p) { cart.push({n, p}); updateUI(); }
        function updateUI() {
            document.getElementById('cart-badge').innerText = cart.length;
            const items = document.getElementById('cart-items'); let total = 0; items.innerHTML = "";
            cart.forEach(i => { total += i.p; items.innerHTML += `<div class="flex justify-between text-[10px] font-bold uppercase"><span class="text-gray-400">${i.n}</span><span>RD$ ${i.p.toLocaleString()}</span></div>`; });
            document.getElementById('cart-total').innerText = "RD$ " + total.toLocaleString();
            renderPayPal((total / TASA).toFixed(2));
        }

        function renderPayPal(usd) {
            document.getElementById('paypal-container').innerHTML = "";
            if(usd > 0) paypal.Buttons({
                createOrder: (d, a) => a.order.create({ purchase_units: [{ amount: { value: usd } }] }),
                onApprove: (d, a) => a.order.capture().then(() => { alert("PAGO RECIBIDO EXITOSAMENTE"); cart=[]; updateUI(); closeCart(); })
            }).render('#paypal-container');
        }

        function openCart() { document.getElementById('modal-cart').style.display='flex'; }
        function closeCart() { document.getElementById('modal-cart').style.display='none'; }
        
        function checkoutWA() {
            const n = document.getElementById('cust-name').value, l = document.getElementById('cust-lastname').value, e = document.getElementById('cust-email').value;
            if(!n || !e) return alert("Completa tus datos");
            let msg = `âš¡ *ORDEN VIBEPHONE RD*\nðŸ‘¤ *Cliente:* ${n} ${l}\nðŸ“§ *Email:* ${e}\n\n`;
            cart.forEach(i => msg += `â€¢ ${i.n} - RD$ ${i.p.toLocaleString()}\n`);
            msg += `\nðŸ’° *Total: ${document.getElementById('cart-total').innerText}*`;
            window.location.href = `https://wa.me/18098182320?text=${encodeURIComponent(msg)}`;
        }

        loadStore();
    </script>
</body>
</html>
